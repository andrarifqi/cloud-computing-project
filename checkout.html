<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout: Overview - StyleSphere</title>
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="checkout-header">
        <div class="container">
            <h1 class="logo">StyleSphere</h1>
        </div>
    </header>

    <div class="checkout-container">
        <div class="checkout-title">
            <h1>Checkout: Overview</h1>
        </div>
        
        <div class="checkout-content">
            <div class="order-summary">
                <table class="order-table">
                    <thead>
                        <tr>
                            <th>QTY</th>
                            <th>DESCRIPTION</th>
                            <th>PRICE</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="qty">1</td>
                            <td class="description">
                                <div class="product-name" id="productName">Wireless Headphones</div>
                                <div class="product-desc">High-quality wireless headphones with noise cancellation</div>
                            </td>
                            <td class="price" id="productPrice">$99.99</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="checkout-details">
                <div class="detail-section">
                    <h3>Payment Information:</h3>
                    <p><strong>Payment Method:</strong> Credit Card ending in 1337</p>
                </div>

                <div class="detail-section">
                    <h3>Shipping Information:</h3>
                    <p><strong>Delivery:</strong> FREE STANDARD DELIVERY!</p>
                    <div class="shipping-address" id="shippingAddress">
                        <p><span id="customerName">John Doe</span></p>
                        <p><span id="customerAddress">123 Main St, City, State 12345</span></p>
                    </div>
                </div>

                <div class="order-totals">
                    <div class="total-row">
                        <span>Item total:</span>
                        <span id="itemTotal">$99.99</span>
                    </div>
                    <div class="total-row">
                        <span>Shipping:</span>
                        <span>FREE</span>
                    </div>
                    <div class="total-row final-total">
                        <span><strong>Total:</strong></span>
                        <span id="finalTotal"><strong>$107.99</strong></span>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="goBack()">CANCEL</button>
                    <button type="button" class="btn btn-primary btn-finish" onclick="finishOrder()">Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadOrderData();
            loadBuyerInfo();
        });

        function loadOrderData() {
            const productName = localStorage.getItem('purchasedItem') || 'Wireless Headphones';
            const productPrice = parseFloat(localStorage.getItem('purchasePrice')) || 99.99;
            
            document.getElementById('productName').textContent = productName;
            document.getElementById('productPrice').textContent = `$${productPrice.toFixed(2)}`;
            document.getElementById('itemTotal').textContent = `$${productPrice.toFixed(2)}`;
            
            const tax = productPrice * 0.08;
            document.getElementById('taxAmount').textContent = `$${tax.toFixed(2)}`;
            
            const total = productPrice + tax;
            document.getElementById('finalTotal').innerHTML = `<strong>$${total.toFixed(2)}</strong>`;
        }

        function loadBuyerInfo() {
            const buyerInfo = JSON.parse(localStorage.getItem('buyerInfo') || '{}');
            
            if (buyerInfo.firstName && buyerInfo.lastName) {
                document.getElementById('customerName').textContent = 
                    `${buyerInfo.firstName} ${buyerInfo.lastName}`;
            }
            
            if (buyerInfo.address) {
                const address = `${buyerInfo.address}, ${buyerInfo.city || ''}, ${buyerInfo.state || ''} ${buyerInfo.zipCode || ''}`;
                document.getElementById('customerAddress').textContent = address;
            }
        }

        function goBack() {
            window.location.href = 'buyer-info.html';
        }

        function finishOrder() {
            // Store final order details
            const orderData = {
                timestamp: new Date().toISOString(),
                product: localStorage.getItem('purchasedItem'),
                price: localStorage.getItem('purchasePrice'),
                buyer: JSON.parse(localStorage.getItem('buyerInfo') || '{}')
            };
            localStorage.setItem('completedOrder', JSON.stringify(orderData));
            
            window.location.href = 'thanks.html';
        }
    </script>
</body>
</html>
